dotnet ef migrations add InitialIdentity --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --context AppIdentityDbContext --output-dir Infrastructure/Migrations
dotnet ef migrations add InitialApp --context AppDbContext --output-dir Infrastructure/Migrations


## observa��o: no entity, quando eu tenho a liga��o 1:1 no banco de dados eu preciso referencias as entidades em ambas as classes da Entity.

-- executar esse para iniciar as migrations
--dotnet ef migrations add InitialCreate --project ./Projeto.Modulo.Infrastructure/Projeto.Modulo.Infrastructure.csproj --startup-project ./Projeto.Modulo.Api/Projeto.Modulo.Api.csproj --context ApplicationDbContext --output-dir Migrations --verbose

# para migrations do identity 
dotnet ef migrations add InitialIdentity --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppIdentityDbContext --output-dir ./Migrations/001_Identity

# para migrations das tables de neg�cio.
dotnet ef migrations add InitialApp --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business
dotnet ef migrations add AddProduto --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjusteTables --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add TornarPapelNullable --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjustePedido --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjusteVenda --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjusteTables --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjustePedidoTransacao --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjusteVendedorPix --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjusteStatusDescricao --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose

dotnet ef migrations add AjusteTablesVendedor --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose
dotnet ef migrations add AjusteTablesCliente --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business --verbose



dotnet ef migrations add AtualizarTables --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj  --context AppDbContext --output-dir ./Migrations/002_business


dotnet ef database remove --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppDbContext
dotnet ef database update --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppDbContext


-- adicionar uma nova migration
dotnet ef migrations add [nome-da-migration] --project ./Projeto.Modulo.Infrastructure/Projeto.Modulo.Infrastructure.csproj --startup-project ./Projeto.Modulo.Api/Projeto.Modulo.Api.csproj --context ApplicationDbContext --output-dir Migrations

-- atualizar a estrutura do banco de dados
# dotnet ef database update --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --context AppDbContext

dotnet ef database update --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppIdentityDbContext
dotnet ef database update --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppDbContext
dotnet ef database remove --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppDbContext

dotnet ef migrations remove --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppDbContext
dotnet ef database update NomeDaMigrationAnterior  --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppDbContext




dotnet ef migrations remove --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.API/Projeto.Moope.API.csproj --context AppDbContext

dotnet ef migrations remove --project ./Projeto.Modulo.Infrastructure/Projeto.Modulo.Infrastructure.csproj --context ApplicationDbContext


dotnet ef migrations add AtualizarTableEndereco --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.Api/Projeto.Moope.Api.csproj --context ApplicationDbContext --output-dir Migrations
dotnet ef migrations add AtualizarTableFornecedoreEndereco --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.Api/Projeto.Moope.Api.csproj --context ApplicationDbContext --output-dir Migrations

dotnet ef migrations add AtualizarTableFornecedoreProduto --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.Api/Projeto.Moope.Api.csproj --context ApplicationDbContext --output-dir Migrations
dotnet ef migrations add CorrigirChaveEstrangeiraProdutoFornecedor --project ./Projeto.Moope.Infrastructure/Projeto.Moope.Infrastructure.csproj --startup-project ./Projeto.Moope.Api/Projeto.Moope.Api.csproj --context ApplicationDbContext --output-dir Migrations


***************************************************************
https://docs-celpayments.celcoin.com.br/
https://app.sandbox.cel.cash/v2/login
E-mail: webservice@galaxpay.com.br
Senha: webservice@ 

Plano basico = 3787
plano premium = 3789
***************************************************************

docker build -t moope-frontend . 
## docker run -d -p 4001:4001 moope-frontend 
docker run -d -p 4001:4001 --name moope-frontend moope-frontend
docker logs -f moope-frontend

docker run -d --name moope-frontend -p 4001:80 -v "$(pwd)/dist/moope/browser:/usr/share/nginx/html:ro" nginx:alpine
docker exec -it moope-frontend ls -la /usr/share/nginx/html

# comando para ver as pastas no serviço docker
docker exec -it moope-frontend ls -la /usr/share/nginx/html


docker ps --format "table {{.ID}}\t{{.Image}}\t{{.Ports}}\t{{.Names}}"


docker compose -f docker-compose-traefik-prod.yml up -d --build --scale app=3

PORT=4002 node dist/moope/server/server.mjs



docker compose -f docker-compose-traefik-prod.yml up -d --build
docker compose logs -f traefik
docker compose logs -f web


---
## docker compose -f docker-compose-mysql.yml up -d --build
## docker compose -f docker-compose-mysql.yml ps
## docker compose -f docker-compose-mysql.yml logs -f mysql phpmyadmin 
## sudo ss -ltnp | grep :3307
## 
## docker compose -f docker-compose.mysql.yml up -d --build
## docker compose -f docker-compose.mysql.yml ps
## docker compose -f docker-compose.mysql.yml logs -f mysql phpmyadmin 


# Subir/Recriar
docker compose -f docker-compose-mysql.yml up -d --build

# Ver status
docker compose -f docker-compose-mysql.yml ps

# Logs
docker compose -f docker-compose-mysql.yml logs -f mysql phpmyadmin

# Testar conexão pelo host (porta 3307)
mysql -h 127.0.0.1 -P 3307 -u appuser -p

-----
docker compose -f docker-compose-traefik-api.yml up -d --build

# ver status
docker compose -f docker-compose-traefik-api.yml ps

# logs
docker compose -f docker-compose-traefik-api.yml logs -f api
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------

igor@debian:~$ htpasswd -nb admin 'M00p3**P@55w$Rd' | sed -e 's/\$/\$\$/g'
admin:$$apr1$$/DJ0gTSi$$q4mLt/l6LKMqOIvNEV3No1


docker exec -it moope-mysql bash



https://moope.localhost/
https://dbadmin.localhost/

----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
docker compose -f docker-compose.yml up -d --build

docker compose logs -f moope-phpmyadmin
docker compose logs -f moope-frontend
docker compose logs -f moope-mysql
docker compose logs -f traefik
docker compose logs -f moope-api
----------------------------------------------------------------------------------------------------
----------------------------------------------------------------------------------------------------
chmod +x deploy.sh

# Usar o script
./deploy.sh staging up
./deploy.sh staging logs
./deploy.sh staging down
